<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="Dashboard">
        <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
        <title>Wildlife Reserves Singapore</title>

        <!-- Bootstrap core CSS -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <!--external css-->
        <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="assets/lineicons/style.css">    
        <link rel="stylesheet" href="assets/css/leaflet.css">
    
        <!-- Custom styles for this template -->
        <link href="assets/css/style.css" rel="stylesheet">
        <link href="assets/css/style-responsive.css" rel="stylesheet">
        
        <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
        <script src="assets/js/build/heatmap.js"></script>
        <script src="assets/js/plugins/leaflet-heatmap.js"></script>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        
    </head>

    <body>

        <section id="container" >
            <!-- **********************************************************************************************************************************************************
            TOP BAR CONTENT & NOTIFICATIONS
            *********************************************************************************************************************************************************** -->
            
            <!--header start-->
            <header class="header black-bg">
                <div class="sidebar-toggle-box">
                    <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
                </div>
                <!--logo start-->
                <a href="index.html" class="logo">Wildlife Reserves Singapore</a>
                <!--logo end-->
                
                <div class="top-menu">
                    <ul class="nav pull-right top-menu">
                        <!--<li><a class="logout" href="login.html">Logout</a></li>-->
                    </ul>
                </div>
            </header>
            <!--header end-->
      
            <!-- **********************************************************************************************************************************************************
            MAIN SIDEBAR MENU
            *********************************************************************************************************************************************************** -->
            <!--sidebar start-->
            <aside>
                <div id="sidebar"  class="nav-collapse ">
                <!-- sidebar menu start-->
                    <ul class="sidebar-menu" id="nav-accordion">

                        <li>
                            <p class="centered"><img src="assets/img/logo-sgZoo.png" width="60"></p>
                        </li>

                        <!--<li class="mt">-->
                        <li class="sub-menu">
                            <a class="active" href="index.html">
                                <i class="fa fa-dashboard"></i>
                                <span>Footfall Analytic</span>
                            </a>
                            <ul class="sub">
                                <li><a  href="index.html">Line Chart</a></li>
                                <li><a  href="heatmap.html">Heat Map</a></li>
                            </ul>
                        </li>

                        <li class="sub-menu">
                            <a href="javascript:;" >
                                <i class=" fa fa-bar-chart-o"></i>
                                <span>Social Media Analytic</span>
                            </a>
                        </li>

                    </ul>
                    <!-- sidebar menu end-->
                </div>
            </aside>
            <!--sidebar end-->
            
            <!-- **********************************************************************************************************************************************************
            MAIN CONTENT
            *********************************************************************************************************************************************************** -->
            
            <!--main content start-->
            <section id="main-content">
                <section class="wrapper">
                    <h3><i class="fa fa-angle-right"></i> Heatmap</h3>
                    <!-- page start-->
                    <div id="morris">
                        <div class="col-lg-2">
                            <div class="form-panel">
                                <h4 class="mb">
                                    <i class="fa fa-angle-right"></i>
                                     Manpower Allocation
                                </h4>
                                <form class="form-horizontal style-form" action method="get">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-sm-4 control-label">Staff Name: </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-4 col-sm-4 control-label">Destination </label>
                                        <div class="col-sm-8">
                                            <select class="form-control">
                                                <option>Ah Meng Restaurant</option>
                                                <option>Amphitheatre</option>
                                                <option>Australian Outback</option>
                                                <option>Elephant Show</option>
                                                <option>Entrance behind ticket counters</option>
                                                <option>KFC Restaurant at KidzWorld</option>
                                                <option>SPH Kiosk</option>
                                                <option>Taxi Stand</option>
                                                <option>WHRC</option>
                                            </select>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div id="map"></div>
                    <!-- page end-->
                </section>          
            </section><!-- /MAIN CONTENT -->
            <!--main content end-->
            
            <!--footer start-->
            <footer class="site-footer">
                <div class="text-center">
                    2016 - Visualizing Mandai
                    <a href="index.html#" class="go-top">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>
            </footer>
            <!--footer end-->
        </section>

        <!-- js placed at the end of the document so the pages load faster -->
        <script src="assets/js/jquery.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
        <script src="assets/js/jquery.scrollTo.min.js"></script>
        <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>


        <!--common script for all pages-->
        <script src="assets/js/common-scripts.js"></script>

        <!--script for this page-->
        <script>
            
            window.onload = function() {
                
            // 6 attraction
            var testData = {
                max: 8,
                data: [{lat: 1.40354, lng:103.79683, count: 222},{lat: 1.40580, lng:103.79314, count: 110},{lat: 1.40493, lng:103.79104, count: 659},{lat: 1.40415, lng:103.79355, count: 179},{lat: 1.40228, lng:103.79597, count: 172},{lat: 1.40400, lng:103.79146, count: 71},{lat: 1.40460, lng:103.79497, count: 110}]
            };
            
            var baseLayer = L.tileLayer(
                'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
                    attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> Contributors ',
                    maxZoom: 28
                }
            );
                
            var planes = [
                ["Region: <b>Entrance behind ticket counters</b><br>Total Visitor: 659<br>Returning Visitor: 144<br>Total Staff: 4",
                1.40493, 103.79104],
                ["Region: <b>Australian Outback</b><br>Total Visitor: 110<br>Returning Visitor: 11<br>Total Staff: 10",
                1.40580, 103.79314],
                ["Region: <b>Amphitheatre</b><br>Total Visitor: 110<br>Returning Visitor: 17<br>Total Staff: 7",
                1.40460, 103.7949],
                ["Region: <b>KFC Restaurant at KidzWorld</b><br>Total Visitor: 222<br>Returning Visitor: 38<br>Total Staff: 3",
                1.40354, 103.79683],
                ["Region: <b>SPH Kiosk</b><br>Total Visitor: 172<br>Returning Visitor: 30<br>Total Staff: 2",
                1.40228, 103.79597],
                ["Region: <b>Ah Meng Restaurant</b><br>Total Visitor: 179<br>Returning Visitor: 25<br>Total Staff: 5",
                1.40415, 103.79355],
                ["Region: <b>WHRC</b><br>Total Visitor: 71<br>Returning Visitor: 52<br>Total Staff: 8",
                1.40400, 103.79146],
                ["Region: <b>Taxi STand</b><br>Total Visitor: 71<br>Returning Visitor: 52<br>Total Staff: 8",
                1.40471, 103.79049],
                ["Region: <b>Elephant Show</b><br>Total Visitor: 71<br>Returning Visitor: 52<br>Total Staff: 8",
                1.40527, 103.79565]
            ]

            
            var cfg = {
                // radius should be small ONLY if scaleRadius is true (or small radius is intended)
                "radius": 0.0005,
                "maxOpacity": .9, 
                // scales the radius based on map zoom
                "scaleRadius": true, 
                // if set to false the heatmap uses the global maximum for colorization
                // if activated: uses the data maximum within the current map boundaries 
                //   (there will always be a red spot with useLocalExtremas true)
                "useLocalExtrema": true,
                // which field name in your data represents the latitude - default "lat"
                latField: 'lat',
                // which field name in your data represents the longitude - default "lng"
                lngField: 'lng',
                // which field name in your data represents the data value - default "value"
                valueField: 'count'
            };


            var heatmapLayer = new HeatmapOverlay(cfg);
                

            var map = new L.Map('map', {
                center: new L.LatLng(1.40375, 103.79374),
                zoom: 18,
                layers: [baseLayer, heatmapLayer]
            });

            heatmapLayer.setData(testData);
                
            for (var i = 0; i < planes.length; i++){
                markers = new L.marker([planes[i][1], planes[i][2]])
                        .bindPopup(planes[i][0])
                        .addTo(map);
            }
                
            // make accessible for debugging
            layer = heatmapLayer;
        };  

        </script>
        
        <script>
            function drag_start(event) {
                var style = window.getComputedStyle(event.target, null);
                event.dataTransfer.setData("text/plain",
                (parseInt(style.getPropertyValue("left"),10) - event.clientX) + ',' + (parseInt(style.getPropertyValue("top"),10) - event.clientY));
            } 
            function drag_over(event) { 
                event.preventDefault(); 
                return false; 
            } 
            function drop(event) { 
                var offset = event.dataTransfer.getData("text/plain").split(',');
                var dm = document.getElementById('dragme');
                dm.style.left = (event.clientX + parseInt(offset[0],10)) + 'px';
                dm.style.top = (event.clientY + parseInt(offset[1],10)) + 'px';
                event.preventDefault();
                return false;
            } 
            var dm = document.getElementById('dragme'); 
            dm.addEventListener('dragstart',drag_start,false); 
            document.body.addEventListener('dragover',drag_over,false); 
            document.body.addEventListener('drop',drop,false); 
        </script>
  

    </body>
</html>